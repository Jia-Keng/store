import{d as x,r as _,E as c,c as u,f as s,F as f,n as p,t as d,w as k,s as C,g as E,h as D,i as y,j as h,m as n,_ as S}from"./index-BfUNu2a-.js";import{c as B,b as F}from"./api-ClBtZScu.js";import{E as M,a as A}from"./eye-C9ID0LB2.js";import"./createLucideIcon-hDlAhtr3.js";const V={class:"w-full h-full relative flex flex-col items-center justify-center bg-[#505050] gap-12"},$={class:"flex flex-row gap-2 bg-[#3a3a3a] p-1 rounded-lg"},j=["onClick"],T={class:"relative"},U=["onUpdate:modelValue","type"],q=["onClick"],z={class:"p-1 text-sm text-red-400"},I={type:"submit",class:"w-full h-12 my-4 self-end bg-[#0067AC] text-white font-semibold rounded-md hover:bg-[#0067AC]/60 transition-colors duration-300"},L=x({__name:"ChangePassword",setup(N){const l=_("system"),b=[{label:"修改系統密碼",value:"system"},{label:"修改設定頁面密碼",value:"setting"}],g=o=>{l.value=o,m(),r.reset()},t=c({originalPassword:"",newPassword:"",confirmPassword:""}),m=()=>{t.originalPassword="",t.newPassword="",t.confirmPassword=""},i=c({originalPassword:!1,newPassword:!1,confirmPassword:!1}),r=c({originalPassword:"",newPassword:"",confirmPassword:"",reset:function(){this.originalPassword="",this.newPassword="",this.confirmPassword=""}}),P=async()=>{try{r.reset();const o=l.value==="system"?"確定修改系統密碼？":"確定修改設定頁面密碼？";if(!confirm(o))return;if(t.newPassword!==t.confirmPassword){r.confirmPassword="與新密碼不符";return}if(t.newPassword.length<1){r.newPassword="密碼不可為空";return}const a={originalPassword:t.originalPassword,newPassword:t.newPassword};l.value==="system"?await B(a):await F(a),alert("修改成功"),m(),r.reset()}catch(o){o instanceof Error?alert(`修改失敗: ${o.message}`):console.error(o)}},v=[{label:"原密碼",key:"originalPassword"},{label:"新密碼",key:"newPassword"},{label:"確認新密碼",key:"confirmPassword"}];return(o,a)=>(n(),u("div",V,[s("div",$,[(n(),u(f,null,p(b,e=>s("button",{key:e.value,type:"button",onClick:w=>g(e.value),class:C(["px-6 py-3 rounded-md font-medium transition-all duration-200",l.value===e.value?"bg-[#0067AC] text-white shadow-lg":"text-white/70 hover:text-white hover:bg-white/10"])},d(e.label),11,j)),64))]),s("form",{class:"w-[60%] min-w-64 max-w-108 flex flex-col gap-3",onSubmit:k(P,["prevent"])},[(n(),u(f,null,p(v,e=>s("div",{key:e.key,class:"flex flex-col gap-1"},[s("label",null,d(e.label),1),s("div",T,[E(s("input",{"onUpdate:modelValue":w=>t[e.key]=w,type:i[e.key]?"text":"password",placeholder:"密碼",class:"h-12 w-full min-w-[20rem] px-3 py-2 text-lg flex rounded-md border border-white/70 bg-transparent text-sm focus:border-2 focus:border-white focus:outline-none"},null,8,U),[[D,t[e.key]]]),s("button",{type:"button",class:"px-3 py-0.5 absolute right-1 top-1/2 -translate-y-1/2 text-muted-foreground",onClick:w=>i[e.key]=!i[e.key]},[i[e.key]?(n(),y(h(M),{key:0,class:"w-5 h-5"})):(n(),y(h(A),{key:1,class:"w-5 h-5"}))],8,q)]),s("p",z,d(r[e.key]),1)])),64)),s("button",I,d(l.value==="system"?"設定新的系統密碼":"設定新的設定頁面密碼"),1)],32),a[0]||(a[0]=s("div",{class:"setting-style w-full h-[20px] absolute top-0 left-0"},null,-1)),a[1]||(a[1]=s("div",{class:"setting-style w-full h-[20px] absolute bottom-0 left-0"},null,-1))]))}}),O=S(L,[["__scopeId","data-v-83b0b552"]]);export{O as default};
