import{a as b,u as x}from"./api-ClBtZScu.js";import{d as k,u as w,r as v,B as S,o as C,A as N,c as u,f as t,F as D,n as L,t as a,C as J,p as c,j as d,m as p,_ as O}from"./index-BfUNu2a-.js";import{c as j}from"./createLucideIcon-hDlAhtr3.js";const f=j("triangle",[["path",{d:"M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"14u9p9"}]]),$={class:"w-full h-full relative flex items-center justify-center bg-[#505050]"},B={class:"grid grid-cols-2 gap-x-10 gap-y-4 text-lg"},E={class:"px-2 py-1.5 flex flex-row item-center gap-1 align-middle text-white bg-[#4b4b4b]"},V={class:"text-base"},A={class:"text-xl"},F={class:"p-4 grid grid-cols-2 gap-6 bg-[#787878] border-t border-[#e5cb2c]"},I={class:"px-4 flex flex-row border-l-3 border-[#82fcd3]"},M={class:"py-2"},T={class:"text-4xl"},U={class:"ml-2"},Z={class:"w-fit h-full mx-4 flex flex-col justify-center gap-0.5"},q=["onClick"],z=["onClick"],G={key:0,class:"px-4 flex flex-row border-l-3 border-[#82fcd3]"},H={class:"py-2"},K={class:"text-4xl"},P={class:"w-fit h-full mx-4 flex flex-col justify-center gap-0.5"},Q=["onClick"],R=["onClick"],W={class:"absolute bottom-[calc(20px+2rem)] right-[3rem] flex flex-row justify-end gap-4"},X=k({__name:"Setting",setup(Y){const g=w(),r=v(null),l=v(null),i=(o,e,s)=>{if(l.value&&l.value[e]&&s in l.value[e]){const n=l.value[e][s];l.value[e][s]=o==="add"?n+1:n-1}};async function h(){try{const o=await b();r.value=o,l.value=JSON.parse(JSON.stringify(r.value))}catch(o){o instanceof Error?(console.log("資料獲取錯誤"),console.log(o.message)):console.error(o)}}async function m(){try{if(l.value)await x(l.value),r.value=JSON.parse(JSON.stringify(l.value)),alert("儲存成功");else throw new Error("無設定資料可供儲存")}catch(o){o instanceof Error?(console.log("儲存資料過程中發生錯誤"),console.log(o.message)):console.error(o)}}const y=[{key:"temp1",title:"溫度上下限設定",num:"#1",type:"temp"},{key:"hum1",title:"濕度上限設定",num:"#1",type:"hum"},{key:"temp2",title:"溫度上下限設定",num:"#2",type:"temp"},{key:"hum2",title:"濕度上限設定",num:"#2",type:"hum"}],_=S(()=>l.value?y.map(o=>({...o,value:l.value?l.value[o.key]:null})):[]);return C(()=>{h()}),N(()=>{g.removeSettingToken()}),(o,e)=>(p(),u("div",$,[t("div",B,[(p(!0),u(D,null,L(_.value,s=>(p(),u("div",{key:s.key,class:"mb-4"},[t("p",E,[t("span",V,a(s.num),1),t("span",A,a(s.title),1)]),t("div",F,[t("div",I,[t("div",null,[e[1]||(e[1]=t("p",null,"上限",-1)),t("p",M,[t("span",T,a(s.value?.upperLimit),1),t("span",U,a(s.type==="temp"?"度":"%"),1)])]),t("div",Z,[t("button",{type:"button",onClick:n=>i("add",s.key,"upperLimit")},[c(d(f),{class:"w-7 h-7 stroke-0 fill-rose-400 hover:scale-120 hover:fill-red-400 transition duration-200"})],8,q),t("button",{type:"button",onClick:n=>i("minus",s.key,"upperLimit")},[c(d(f),{class:"w-7 h-7 stroke-0 fill-sky-400 rotate-180 hover:scale-120 hover:fill-cyan-400 transition duration-200"})],8,z)])]),s.type==="temp"?(p(),u("div",G,[t("div",null,[e[3]||(e[3]=t("p",null,"下限",-1)),t("p",H,[t("span",K,a(s.value?.lowerLimit??"--"),1),e[2]||(e[2]=t("span",{class:"ml-2"},"度",-1))])]),t("div",P,[t("button",{type:"button",onClick:n=>i("add",s.key,"lowerLimit")},[c(d(f),{class:"w-7 h-7 stroke-0 fill-rose-400 hover:scale-120 hover:fill-red-400 transition duration-200"})],8,Q),t("button",{type:"button",onClick:n=>i("minus",s.key,"lowerLimit")},[c(d(f),{class:"w-7 h-7 stroke-0 fill-sky-400 rotate-180 hover:scale-120 hover:fill-cyan-400 transition duration-200"})],8,R)])])):J("",!0)])]))),128)),t("div",W,[t("button",{type:"button",class:"w-32 h-12 bg-white/40 text-white font-semibold rounded-md hover:bg-white/20 hover:text-white/80 transition-colors duration-200",onClick:e[0]||(e[0]=s=>l.value=JSON.parse(JSON.stringify(r.value)))}," 重置設定 "),t("button",{type:"button",class:"w-32 h-12 bg-green-600 text-white font-semibold rounded-md hover:bg-green-700 transition-colors duration-200",onClick:m}," 儲存設定 ")])]),e[4]||(e[4]=t("div",{class:"setting-style w-full h-[20px] absolute top-0 left-0"},null,-1)),e[5]||(e[5]=t("div",{class:"setting-style w-full h-[20px] absolute bottom-0 left-0"},null,-1))]))}}),ot=O(X,[["__scopeId","data-v-d2d5ec60"]]);export{ot as default};
