import{d as C,r as u,B as S,c as r,f as t,w as D,g as N,h as E,i as y,j as i,F as L,n as $,t as c,C as J,p as v,m as n,_ as O}from"./index-nySzXKt_.js";import{u as j,l as B,a as V}from"./api-C8S97F_S.js";import{E as A,a as I}from"./eye-DuFqIG58.js";import{c as M}from"./createLucideIcon-CGH2yFtG.js";const m=M("triangle",[["path",{d:"M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"14u9p9"}]]),F={class:"w-full h-full relative flex items-center justify-center bg-[#505050]"},P={class:"flex flex-row items-center gap-2"},T={class:"relative"},U=["type"],Z={key:1,class:"grid grid-cols-2 gap-x-10 gap-y-4 text-lg"},q={class:"px-2 py-1.5 flex flex-row item-center gap-1 align-middle text-white bg-[#4b4b4b]"},z={class:"text-base"},G={class:"text-xl"},H={class:"p-4 grid grid-cols-2 gap-6 bg-[#787878] border-t border-[#e5cb2c]"},K={class:"px-4 flex flex-row border-l-3 border-[#82fcd3]"},Q={class:"py-2"},R={class:"text-4xl"},W={class:"ml-2"},X={class:"w-fit h-full mx-4 flex flex-col justify-center gap-0.5"},Y=["onClick"],tt=["onClick"],et={key:0,class:"px-4 flex flex-row border-l-3 border-[#82fcd3]"},st={class:"py-2"},ot={class:"text-4xl"},lt={class:"w-fit h-full mx-4 flex flex-col justify-center gap-0.5"},nt=["onClick"],at=["onClick"],rt={class:"absolute bottom-[calc(20px+2rem)] right-[3rem] flex flex-row justify-end gap-4"},it=C({__name:"Setting",setup(ut){const g=u(""),d=u(!1),h=u(!1),p=u(null),l=u(null),f=(s,e,o)=>{if(l.value&&l.value[e]&&o in l.value[e]){const a=l.value[e][o];l.value[e][o]=s==="add"?a+1:a-1}},b=async()=>{try{await B(g.value),alert("登入成功"),h.value=!0,await x()}catch(s){s instanceof Error?alert(`登入失敗: ${s.message}`):console.error(s)}};async function x(){try{const s=await V();p.value=s,l.value=JSON.parse(JSON.stringify(p.value))}catch(s){s instanceof Error?(console.log("資料獲取錯誤"),console.log(s.message)):console.error(s)}}async function w(){try{if(l.value)await j(l.value),p.value=JSON.parse(JSON.stringify(l.value)),alert("儲存成功");else throw new Error("無設定資料可供儲存")}catch(s){s instanceof Error?(console.log("儲存資料過程中發生錯誤"),console.log(s.message)):console.error(s)}}const _=[{key:"temp1",title:"溫度上下限設定",num:"#1",type:"temp"},{key:"hum1",title:"濕度上限設定",num:"#1",type:"hum"},{key:"temp2",title:"溫度上下限設定",num:"#2",type:"temp"},{key:"hum2",title:"濕度上限設定",num:"#2",type:"hum"}],k=S(()=>l.value?_.map(s=>({...s,value:l.value?l.value[s.key]:null})):[]);return(s,e)=>(n(),r("div",F,[h.value?(n(),r("div",Z,[(n(!0),r(L,null,$(k.value,o=>(n(),r("div",{key:o.key,class:"mb-4"},[t("p",q,[t("span",z,c(o.num),1),t("span",G,c(o.title),1)]),t("div",H,[t("div",K,[t("div",null,[e[5]||(e[5]=t("p",null,"上限",-1)),t("p",Q,[t("span",R,c(o.value?.upperLimit),1),t("span",W,c(o.type==="temp"?"度":"%"),1)])]),t("div",X,[t("button",{type:"button",onClick:a=>f("add",o.key,"upperLimit")},[v(i(m),{class:"w-7 h-7 stroke-0 fill-rose-400 hover:scale-120 hover:fill-red-400 transition duration-200"})],8,Y),t("button",{type:"button",onClick:a=>f("minus",o.key,"upperLimit")},[v(i(m),{class:"w-7 h-7 stroke-0 fill-sky-400 rotate-180 hover:scale-120 hover:fill-cyan-400 transition duration-200"})],8,tt)])]),o.type==="temp"?(n(),r("div",et,[t("div",null,[e[7]||(e[7]=t("p",null,"下限",-1)),t("p",st,[t("span",ot,c(o.value?.lowerLimit??"--"),1),e[6]||(e[6]=t("span",{class:"ml-2"},"度",-1))])]),t("div",lt,[t("button",{type:"button",onClick:a=>f("add",o.key,"lowerLimit")},[v(i(m),{class:"w-7 h-7 stroke-0 fill-rose-400 hover:scale-120 hover:fill-red-400 transition duration-200"})],8,nt),t("button",{type:"button",onClick:a=>f("minus",o.key,"lowerLimit")},[v(i(m),{class:"w-7 h-7 stroke-0 fill-sky-400 rotate-180 hover:scale-120 hover:fill-cyan-400 transition duration-200"})],8,at)])])):J("",!0)])]))),128)),t("div",rt,[t("button",{type:"button",class:"w-32 h-12 bg-white/40 text-white font-semibold rounded-md hover:bg-white/20 hover:text-white/80 transition-colors duration-200",onClick:e[2]||(e[2]=o=>l.value=JSON.parse(JSON.stringify(p.value)))}," 重置設定 "),t("button",{type:"button",class:"w-32 h-12 bg-green-600 text-white font-semibold rounded-md hover:bg-green-700 transition-colors duration-200",onClick:w}," 儲存設定 ")])])):(n(),r("form",{key:0,class:"flex flex-col gap-1",onSubmit:D(b,["prevent"])},[e[4]||(e[4]=t("label",{class:"text-lg"},"密碼",-1)),t("div",P,[t("div",T,[N(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>g.value=o),type:d.value?"text":"password",placeholder:"密碼",class:"h-12 w-full min-w-[20rem] px-3 py-2 text-lg flex rounded-md border border-white/70 bg-transparent text-sm focus:border-2 focus:border-white focus:outline-none"},null,8,U),[[E,g.value]]),t("button",{type:"button",class:"px-3 py-0.5 absolute right-1 top-1/2 -translate-y-1/2 text-muted-foreground",onClick:e[1]||(e[1]=o=>d.value=!d.value)},[d.value?(n(),y(i(A),{key:0,class:"w-5 h-5"})):(n(),y(i(I),{key:1,class:"w-5 h-5"}))])]),e[3]||(e[3]=t("button",{type:"submit",class:"w-24 h-12 bg-[#0067AC] text-white font-semibold rounded-md hover:bg-[#0067AC]/60 transition-colors duration-300"}," 登入 ",-1))])],32)),e[8]||(e[8]=t("div",{class:"setting-style w-full h-[20px] absolute top-0 left-0"},null,-1)),e[9]||(e[9]=t("div",{class:"setting-style w-full h-[20px] absolute bottom-0 left-0"},null,-1))]))}}),vt=O(it,[["__scopeId","data-v-afbef9c5"]]);export{vt as default};
